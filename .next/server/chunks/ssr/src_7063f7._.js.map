{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://D%3A/Portfolio/Shop-kwork/shop-kwork/src/entities/favouriteStore/store.ts"],"sourcesContent":["import { create } from \"zustand\";\r\nimport { toast } from \"react-toastify\";\r\n\r\ninterface Favourite {\r\n  id: string;\r\n  name: string;\r\n  price: number;\r\n  img: string;\r\n}\r\n\r\ninterface FavouriteStore {\r\n  favourite: Favourite[];\r\n  addFav: (fav: Favourite) => void;\r\n  removeFav: (id: string) => void;\r\n  clearFav: () => void;\r\n  totalCost: () => number;\r\n}\r\n\r\nexport const useFavStore = create<FavouriteStore>((set, get) => ({\r\n  favourite: [],\r\n  addFav: fav => {\r\n    const isAlreadyAdded = get().favourite.some(item => item.id === fav.id);\r\n\r\n    if (!isAlreadyAdded) {\r\n      set(state => ({\r\n        favourite: [...state.favourite, fav],\r\n      }));\r\n      toast.success(`Добавлено в избранное: ${fav.name}`, {\r\n        position: \"top-right\",\r\n      });\r\n    } else {\r\n      toast.warning(`Объект уже в избранном: ${fav.name}`, {\r\n        position: \"top-right\",\r\n      });\r\n    }\r\n  },\r\n  removeFav: id => {\r\n    const favItem = get().favourite.find(fav => fav.id === id);\r\n    set(state => ({\r\n      favourite: state.favourite.filter(fav => fav.id !== id),\r\n    }));\r\n    if (favItem) {\r\n      toast.error(`Удалено из избранного: ${favItem.name}`, {\r\n        position: \"top-right\",\r\n      });\r\n    }\r\n  },\r\n  clearFav: () => {\r\n    set(() => ({\r\n      favourite: [],\r\n    }));\r\n    toast.info(\"Избранное очищено.\", {\r\n      position: \"top-right\",\r\n    });\r\n  },\r\n  totalCost: () => {\r\n    const products = get().favourite;\r\n    return products.reduce((total, fav) => total + fav.price, 0);\r\n  },\r\n}));\r\n"],"names":[],"mappings":";;;AACA;AADA;;;AAkBO,MAAM,cAAc,CAAA,GAAA,wIAAA,CAAA,SAAM,AAAD,EAAkB,CAAC,KAAK,MAAQ,CAAC;QAC/D,WAAW,EAAE;QACb,QAAQ,CAAA;YACN,MAAM,iBAAiB,MAAM,SAAS,CAAC,IAAI,CAAC,CAAA,OAAQ,KAAK,EAAE,KAAK,IAAI,EAAE;YAEtE,IAAI,CAAC,gBAAgB;gBACnB,IAAI,CAAA,QAAS,CAAC;wBACZ,WAAW;+BAAI,MAAM,SAAS;4BAAE;yBAAI;oBACtC,CAAC;gBACD,mJAAA,CAAA,QAAK,CAAC,OAAO,CAAC,CAAC,uBAAuB,EAAE,IAAI,IAAI,EAAE,EAAE;oBAClD,UAAU;gBACZ;YACF,OAAO;gBACL,mJAAA,CAAA,QAAK,CAAC,OAAO,CAAC,CAAC,wBAAwB,EAAE,IAAI,IAAI,EAAE,EAAE;oBACnD,UAAU;gBACZ;YACF;QACF;QACA,WAAW,CAAA;YACT,MAAM,UAAU,MAAM,SAAS,CAAC,IAAI,CAAC,CAAA,MAAO,IAAI,EAAE,KAAK;YACvD,IAAI,CAAA,QAAS,CAAC;oBACZ,WAAW,MAAM,SAAS,CAAC,MAAM,CAAC,CAAA,MAAO,IAAI,EAAE,KAAK;gBACtD,CAAC;YACD,IAAI,SAAS;gBACX,mJAAA,CAAA,QAAK,CAAC,KAAK,CAAC,CAAC,uBAAuB,EAAE,QAAQ,IAAI,EAAE,EAAE;oBACpD,UAAU;gBACZ;YACF;QACF;QACA,UAAU;YACR,IAAI,IAAM,CAAC;oBACT,WAAW,EAAE;gBACf,CAAC;YACD,mJAAA,CAAA,QAAK,CAAC,IAAI,CAAC,sBAAsB;gBAC/B,UAAU;YACZ;QACF;QACA,WAAW;YACT,MAAM,WAAW,MAAM,SAAS;YAChC,OAAO,SAAS,MAAM,CAAC,CAAC,OAAO,MAAQ,QAAQ,IAAI,KAAK,EAAE;QAC5D;IACF,CAAC"}},
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 64, "column": 0}, "map": {"version":3,"sources":["file://D%3A/Portfolio/Shop-kwork/shop-kwork/src/entities/CatalogCard/ui/CatalogCard.tsx"],"sourcesContent":["\"use client\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { ICCard } from \"../types\";\r\n\r\nimport \"../styles/catalog-card.scss\";\r\n\r\nimport { useFavStore } from \"@/entities/favouriteStore/store\";\r\nimport Link from \"next/link\";\r\nimport Image from \"next/image\";\r\nimport { useAddToWishlistMutation } from \"@/shared/api/ProfileApi/ProfileApi\";\r\nimport { useAuth } from \"@/shared/hook/AuthContext/ui/AuthContext\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\nconst CatalogCard = ({ id, img, name, href, price }: ICCard) => {\r\n  const { addFav } = useFavStore();\r\n  const { push } = useRouter();\r\n  const [addToWishlist] = useAddToWishlistMutation();\r\n  const { token } = useAuth(); // Теперь токен приходит из контекста\r\n  const [localToken, setLocalToken] = useState<string | null>(token);\r\n\r\n  useEffect(() => {\r\n    setLocalToken(token); // Синхронизируем состояние с контекстомW\r\n  }, [token]);\r\n\r\n  // useEffect(() => {\r\n  //   if (typeof window !== \"undefined\") {\r\n  //     setToken(localStorage.getItem(\"access_token\") || \"\");\r\n  //   }\r\n  // }, []);\r\n\r\n  const handleAddFavourite = () => {\r\n    if (localToken) {\r\n      addToWishlist({ product_id: id });\r\n      if (!localToken) {\r\n        if (name.trim() && price) {\r\n          addFav({\r\n            id: id.toString(),\r\n            name,\r\n            price: parseFloat(price),\r\n            img,\r\n          });\r\n        }\r\n      } else {\r\n        if (name.trim() && price) {\r\n          addFav({\r\n            id: id.toString(),\r\n            name,\r\n            price: parseFloat(price),\r\n            img,\r\n          });\r\n        }\r\n      }\r\n    } else {\r\n      push(\"/login\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"catalog-card flex flex-col items-center relative transition-all duration-300 pb-2 hover:shadow-lg\">\r\n      <div className=\"relative group\">\r\n        <Link href={href} className=\"block w-full\">\r\n          {/* Используем Image компонент для загрузки изображения */}\r\n          <Image\r\n            width={400}\r\n            height={400}\r\n            loading=\"lazy\"\r\n            src={img}\r\n            alt={name}\r\n            className={`w-auto h-[600px] object-cover`}\r\n          />\r\n        </Link>\r\n\r\n        {price && (\r\n          <button\r\n            className=\"absolute bottom-2 right-2 hover:bg-white p-2 rounded-full shadow-md opacity-0 group-hover:opacity-100 transition-opacity duration-300\"\r\n            aria-label=\"Добавить в избранное\"\r\n            onClick={handleAddFavourite}\r\n          >\r\n            ❤\r\n          </button>\r\n        )}\r\n      </div>\r\n      <span className={price ? \"productions__item-name\" : \"categories__item-name\"}>{name}</span>\r\n      {/* Убедитесь, что price всегда строка или пустая строка */}\r\n      <span className=\"productions__item-price\">{price ? `${price} руб.` : \"\"}</span>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CatalogCard;\r\n"],"names":[],"mappings":";;;;AACA;AAKA;AACA;AACA;AACA;AACA;AACA;AAXA;;;;;;;;;;AAaA,MAAM,cAAc,CAAC,EAAE,EAAE,EAAE,GAAG,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,EAAU;IACzD,MAAM,EAAE,MAAM,EAAE,GAAG,CAAA,GAAA,0IAAA,CAAA,cAAW,AAAD;IAC7B,MAAM,EAAE,IAAI,EAAE,GAAG,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IACzB,MAAM,CAAC,cAAc,GAAG,CAAA,GAAA,iJAAA,CAAA,2BAAwB,AAAD;IAC/C,MAAM,EAAE,KAAK,EAAE,GAAG,CAAA,GAAA,0JAAA,CAAA,UAAO,AAAD,KAAK,qCAAqC;IAClE,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IAE5D,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,cAAc,QAAQ,yCAAyC;IACjE,GAAG;QAAC;KAAM;IAEV,oBAAoB;IACpB,yCAAyC;IACzC,4DAA4D;IAC5D,MAAM;IACN,UAAU;IAEV,MAAM,qBAAqB;QACzB,IAAI,YAAY;YACd,cAAc;gBAAE,YAAY;YAAG;YAC/B,IAAI,CAAC,YAAY;gBACf,IAAI,KAAK,IAAI,MAAM,OAAO;oBACxB,OAAO;wBACL,IAAI,GAAG,QAAQ;wBACf;wBACA,OAAO,WAAW;wBAClB;oBACF;gBACF;YACF,OAAO;gBACL,IAAI,KAAK,IAAI,MAAM,OAAO;oBACxB,OAAO;wBACL,IAAI,GAAG,QAAQ;wBACf;wBACA,OAAO,WAAW;wBAClB;oBACF;gBACF;YACF;QACF,OAAO;YACL,KAAK;QACP;IACF;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC,4JAAA,CAAA,UAAI;wBAAC,MAAM;wBAAM,WAAU;kCAE1B,cAAA,8OAAC,6HAAA,CAAA,UAAK;4BACJ,OAAO;4BACP,QAAQ;4BACR,SAAQ;4BACR,KAAK;4BACL,KAAK;4BACL,WAAW,CAAC,6BAA6B,CAAC;;;;;;;;;;;oBAI7C,uBACC,8OAAC;wBACC,WAAU;wBACV,cAAW;wBACX,SAAS;kCACV;;;;;;;;;;;;0BAKL,8OAAC;gBAAK,WAAW,QAAQ,2BAA2B;0BAA0B;;;;;;0BAE9E,8OAAC;gBAAK,WAAU;0BAA2B,QAAQ,GAAG,MAAM,KAAK,CAAC,GAAG;;;;;;;;;;;;AAG3E;uCAEe"}},
    {"offset": {"line": 195, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 201, "column": 0}, "map": {"version":3,"sources":["file://D%3A/Portfolio/Shop-kwork/shop-kwork/src/entities/CatalogCard/index.ts"],"sourcesContent":["import CatalogCard from \"./ui/CatalogCard\";\r\nexport default CatalogCard;\r\n"],"names":[],"mappings":";;;AAAA;;uCACe,oJAAA,CAAA,UAAW"}},
    {"offset": {"line": 207, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 213, "column": 0}, "map": {"version":3,"sources":["file://D%3A/Portfolio/Shop-kwork/shop-kwork/src/shared/ui/Breadcrumbs/ui/Breadcrumbs.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport Link from \"next/link\";\r\nimport { usePathname } from \"next/navigation\";\r\n\r\nconst segmentNames: Record<string, string> = {\r\n  \"catalog-categories\": \"Каталог\",\r\n  \"catalog-products\": \"Каталог\",\r\n};\r\n\r\nconst isSlug = (segment: string) => /^[a-zA-Z0-9-_]+$/.test(segment);\r\nconst isProductId = (segment: string) => /^[0-9]+$/.test(segment);\r\n\r\nconst Breadcrumbs = () => {\r\n  const pathname = usePathname();\r\n  const pathSegments = pathname.split(\"/\").filter(segment => segment);\r\n\r\n  return (\r\n    <nav aria-label=\"breadcrumb\">\r\n      <ul className=\"flex space-x-2 text-gray-600\">\r\n        <li>\r\n          <Link href=\"/\" className=\"hover:underline\">\r\n            Главная\r\n          </Link>\r\n        </li>\r\n        {pathSegments.map((segment, index) => {\r\n          const href = \"/\" + pathSegments.slice(0, index + 1).join(\"/\");\r\n          const isLast = index === pathSegments.length - 1;\r\n\r\n          let displayName = segmentNames[segment] || decodeURIComponent(segment);\r\n          if (isSlug(segment) && !segmentNames[segment]) displayName = segment;\r\n          if (isProductId(segment)) displayName = \"Product\";\r\n\r\n          return (\r\n            <li key={href} className=\"flex items-center\">\r\n              <span className=\"mx-2\">/</span>\r\n              {isLast ? (\r\n                <span className=\"text-gray-800\">{displayName}</span>\r\n              ) : (\r\n                <Link href={href === \"/catalog-products\" ? \"/catalog-categories\" : href} className=\"hover:underline\">\r\n                  {displayName}\r\n                </Link>\r\n              )}\r\n            </li>\r\n          );\r\n        })}\r\n      </ul>\r\n    </nav>\r\n  );\r\n};\r\n\r\nexport default Breadcrumbs;\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AAHA;;;;AAKA,MAAM,eAAuC;IAC3C,sBAAsB;IACtB,oBAAoB;AACtB;AAEA,MAAM,SAAS,CAAC,UAAoB,mBAAmB,IAAI,CAAC;AAC5D,MAAM,cAAc,CAAC,UAAoB,WAAW,IAAI,CAAC;AAEzD,MAAM,cAAc;IAClB,MAAM,WAAW,CAAA,GAAA,kIAAA,CAAA,cAAW,AAAD;IAC3B,MAAM,eAAe,SAAS,KAAK,CAAC,KAAK,MAAM,CAAC,CAAA,UAAW;IAE3D,qBACE,8OAAC;QAAI,cAAW;kBACd,cAAA,8OAAC;YAAG,WAAU;;8BACZ,8OAAC;8BACC,cAAA,8OAAC,4JAAA,CAAA,UAAI;wBAAC,MAAK;wBAAI,WAAU;kCAAkB;;;;;;;;;;;gBAI5C,aAAa,GAAG,CAAC,CAAC,SAAS;oBAC1B,MAAM,OAAO,MAAM,aAAa,KAAK,CAAC,GAAG,QAAQ,GAAG,IAAI,CAAC;oBACzD,MAAM,SAAS,UAAU,aAAa,MAAM,GAAG;oBAE/C,IAAI,cAAc,YAAY,CAAC,QAAQ,IAAI,mBAAmB;oBAC9D,IAAI,OAAO,YAAY,CAAC,YAAY,CAAC,QAAQ,EAAE,cAAc;oBAC7D,IAAI,YAAY,UAAU,cAAc;oBAExC,qBACE,8OAAC;wBAAc,WAAU;;0CACvB,8OAAC;gCAAK,WAAU;0CAAO;;;;;;4BACtB,uBACC,8OAAC;gCAAK,WAAU;0CAAiB;;;;;qDAEjC,8OAAC,4JAAA,CAAA,UAAI;gCAAC,MAAM,SAAS,sBAAsB,wBAAwB;gCAAM,WAAU;0CAChF;;;;;;;uBANE;;;;;gBAWb;;;;;;;;;;;;AAIR;uCAEe"}},
    {"offset": {"line": 305, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 311, "column": 0}, "map": {"version":3,"sources":["file://D%3A/Portfolio/Shop-kwork/shop-kwork/src/shared/ui/Breadcrumbs/index.ts"],"sourcesContent":["import Breadcrumbs from \"./ui/Breadcrumbs\";\r\nexport default Breadcrumbs;\r\n"],"names":[],"mappings":";;;AAAA;;uCACe,wJAAA,CAAA,UAAW"}},
    {"offset": {"line": 317, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 323, "column": 0}, "map": {"version":3,"sources":["file://D%3A/Portfolio/Shop-kwork/shop-kwork/src/widgets/CatalogPage/ui/CatalogPage.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport CatalogCard from \"@/entities/CatalogCard\";\r\nimport React from \"react\";\r\nimport \"../styles/catalog-categories.scss\";\r\nimport { useGetCategoriesQuery } from \"@/shared/api/CategoriesApi/CategoriesApi\";\r\nimport Breadcrumbs from \"@/shared/ui/Breadcrumbs\";\r\n\r\nconst CatalogPage = () => {\r\n  const { data: categories, error, isLoading } = useGetCategoriesQuery();\r\n\r\n  return (\r\n    <div className=\"flex flex-col gap-4 mt-[10px] justify-center mb-[70px]\">\r\n      <div className=\"breadcrumbs text-sm mx-auto mb-[70px]\">\r\n        <Breadcrumbs />\r\n      </div>\r\n      <div className=\"mb-[20px]\">\r\n        <h1 className=\"title-h1\">Каталог</h1>\r\n        <ul>{/* {categories?.children.map(item => (} */}</ul>\r\n      </div>\r\n      <div className=\"categories-card-container\">\r\n        {isLoading && <div>Loading...</div>}\r\n        {error && <div>Error fetching categories</div>}\r\n\r\n        {categories?.map(item => (\r\n          <CatalogCard\r\n            key={item.id}\r\n            id={item.id}\r\n            img={item.image} // Здесь можно добавить дефолтное изображение\r\n            href={`/catalog-products/${item.slug}`} // Формируем ссылку на категорию\r\n            name={item.title} // Передаем название категории\r\n          />\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CatalogPage;\r\n"],"names":[],"mappings":";;;;AAEA;AAGA;AACA;AANA;;;;;;AAQA,MAAM,cAAc;IAClB,MAAM,EAAE,MAAM,UAAU,EAAE,KAAK,EAAE,SAAS,EAAE,GAAG,CAAA,GAAA,uJAAA,CAAA,wBAAqB,AAAD;IAEnE,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC,2IAAA,CAAA,UAAW;;;;;;;;;;0BAEd,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAAW;;;;;;kCACzB,8OAAC;;;;;;;;;;;0BAEH,8OAAC;gBAAI,WAAU;;oBACZ,2BAAa,8OAAC;kCAAI;;;;;;oBAClB,uBAAS,8OAAC;kCAAI;;;;;;oBAEd,YAAY,IAAI,CAAA,qBACf,8OAAC,uIAAA,CAAA,UAAW;4BAEV,IAAI,KAAK,EAAE;4BACX,KAAK,KAAK,KAAK;4BACf,MAAM,CAAC,kBAAkB,EAAE,KAAK,IAAI,EAAE;4BACtC,MAAM,KAAK,KAAK;2BAJX,KAAK,EAAE;;;;;;;;;;;;;;;;;AAUxB;uCAEe"}},
    {"offset": {"line": 416, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}