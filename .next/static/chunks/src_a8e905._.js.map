{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Ilyas/Desktop/projects/shop-kwork/src/widgets/LoginPage/ui/LoginPage.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { z } from \"zod\";\r\nimport Link from \"next/link\";\r\n\r\nimport { useLoginUserMutation } from \"@/shared/api/LoginApi/LoginApi\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { useAuth } from \"@/shared/hook/AuthContext/ui/AuthContext\";\r\n\r\nconst formSchema = z.object({\r\n  email: z.string().email({\r\n    message: \"Почта введена не правильно\",\r\n  }),\r\n  password: z.string().min(8, {\r\n    message: \"Пароль должен содержать не менее 8 символов\",\r\n  }),\r\n});\r\n\r\ntype FormFields = z.infer<typeof formSchema>;\r\n\r\nconst LoginPage = () => {\r\n  const [loginUser] = useLoginUserMutation();\r\n  const { push } = useRouter();\r\n  const { setToken } = useAuth();\r\n\r\n  const form = useForm<FormFields>({\r\n    resolver: zodResolver(formSchema),\r\n    defaultValues: {\r\n      email: \"\",\r\n      password: \"\",\r\n    },\r\n  });\r\n\r\n  async function onSubmit(values: FormFields) {\r\n    try {\r\n      const result = await loginUser(values).unwrap();\r\n      console.log(\"Login successful:\", result);\r\n      setToken(result.access_token); // Обновит токен глобально\r\n      push(\"/account\");\r\n    } catch (err) {\r\n      console.error(\"Login failed:\", err);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-4 min-w-[220px] lg:min-w-[450px] mt-4 my-10\">\r\n      <div className=\"w-full text-center\">\r\n        <h1 className=\"text-[20px] tablet:text-[30px]\">Вход/Регистрация</h1>\r\n      </div>\r\n      <form\r\n        onSubmit={form.handleSubmit(onSubmit)}\r\n        className=\"flex flex-col mx-auto items-center !mt-12 gap-4 max-w-[600px]\"\r\n      >\r\n        {/* Email Field */}\r\n        <div className=\"flex flex-col space-y-2 w-full\">\r\n          <label className=\"input bg-transparent border-b border-[#423C3D] border-x-0 border-t-0 rounded-none flex items-center gap-2\">\r\n            <input type=\"text\" className=\"grow\" placeholder=\"Почта\" {...form.register(\"email\")} />\r\n          </label>\r\n          {form.formState.errors.email && (\r\n            <span className=\"text-red-500 text-sm\">{form.formState.errors.email.message}</span>\r\n          )}\r\n        </div>\r\n\r\n        {/* Password Field */}\r\n        <div className=\"flex flex-col space-y-2 w-full\">\r\n          <label className=\"input border-b border-[#423C3D] border-x-0 border-t-0 rounded-none bg-transparent flex items-center gap-2\">\r\n            <input\r\n              type=\"password\"\r\n              className=\"grow bg-transparent focus:outline-none\"\r\n              placeholder=\"Пароль\"\r\n              {...form.register(\"password\")}\r\n            />\r\n          </label>\r\n          {form.formState.errors.password && (\r\n            <span className=\"text-red-500 text-sm\">{form.formState.errors.password.message}</span>\r\n          )}\r\n        </div>\r\n\r\n        {/* Submit Button */}\r\n        <div className=\"flex flex-col gap-5 mt-4 w-full\">\r\n          <button type=\"submit\" className=\"bg-gray-100 text-[#423C3D] px-4 py-2 hover:bg-gray-300\">\r\n            Вход\r\n          </button>\r\n          <div className=\"flex flex-col items-center gap-2 justify-center\">\r\n            <button className=\"text-center flex gap-2 \">\r\n              <span className=\"text-[14px]\">У вас нет аккаунта?</span>\r\n              <Link href=\"/register\" className=\"text-blue-300 text-[14px]\">\r\n                Регистрация\r\n              </Link>\r\n            </button>\r\n            <button className=\"text-center flex gap-2\">\r\n              <span className=\"text-[14px]\">Забыли свой</span>\r\n              <Link href=\"/forgot-password\" className=\"text-blue-300 text-[14px]\">\r\n                Пароль?\r\n              </Link>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoginPage;\r\n"],"names":[],"mappings":";;;;AAEA;AAGA;AAEA;AACA;AACA;AALA;AADA;;;AAHA;;;;;;;;AAWA,MAAM,aAAa,uIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IAC1B,OAAO,uIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,KAAK,CAAC;QACtB,SAAS;IACX;IACA,UAAU,uIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;QAC1B,SAAS;IACX;AACF;AAIA,MAAM,YAAY;;IAChB,MAAM,CAAC,UAAU,GAAG,CAAA,GAAA,gJAAA,CAAA,uBAAoB,AAAD;IACvC,MAAM,EAAE,IAAI,EAAE,GAAG,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IACzB,MAAM,EAAE,QAAQ,EAAE,GAAG,CAAA,GAAA,6JAAA,CAAA,UAAO,AAAD;IAE3B,MAAM,OAAO,CAAA,GAAA,iKAAA,CAAA,UAAO,AAAD,EAAc;QAC/B,UAAU,CAAA,GAAA,iKAAA,CAAA,cAAW,AAAD,EAAE;QACtB,eAAe;YACb,OAAO;YACP,UAAU;QACZ;IACF;IAEA,eAAe,SAAS,MAAkB;QACxC,IAAI;YACF,MAAM,SAAS,MAAM,UAAU,QAAQ,MAAM;YAC7C,QAAQ,GAAG,CAAC,qBAAqB;YACjC,SAAS,OAAO,YAAY,GAAG,0BAA0B;YACzD,KAAK;QACP,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,iBAAiB;QACjC;IACF;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAG,WAAU;8BAAiC;;;;;;;;;;;0BAEjD,6LAAC;gBACC,UAAU,KAAK,YAAY,CAAC;gBAC5B,WAAU;;kCAGV,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAM,WAAU;0CACf,cAAA,6LAAC;oCAAM,MAAK;oCAAO,WAAU;oCAAO,aAAY;oCAAS,GAAG,KAAK,QAAQ,CAAC,QAAQ;;;;;;;;;;;4BAEnF,KAAK,SAAS,CAAC,MAAM,CAAC,KAAK,kBAC1B,6LAAC;gCAAK,WAAU;0CAAwB,KAAK,SAAS,CAAC,MAAM,CAAC,KAAK,CAAC,OAAO;;;;;;;;;;;;kCAK/E,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAM,WAAU;0CACf,cAAA,6LAAC;oCACC,MAAK;oCACL,WAAU;oCACV,aAAY;oCACX,GAAG,KAAK,QAAQ,CAAC,WAAW;;;;;;;;;;;4BAGhC,KAAK,SAAS,CAAC,MAAM,CAAC,QAAQ,kBAC7B,6LAAC;gCAAK,WAAU;0CAAwB,KAAK,SAAS,CAAC,MAAM,CAAC,QAAQ,CAAC,OAAO;;;;;;;;;;;;kCAKlF,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAO,MAAK;gCAAS,WAAU;0CAAyD;;;;;;0CAGzF,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAO,WAAU;;0DAChB,6LAAC;gDAAK,WAAU;0DAAc;;;;;;0DAC9B,6LAAC,+JAAA,CAAA,UAAI;gDAAC,MAAK;gDAAY,WAAU;0DAA4B;;;;;;;;;;;;kDAI/D,6LAAC;wCAAO,WAAU;;0DAChB,6LAAC;gDAAK,WAAU;0DAAc;;;;;;0DAC9B,6LAAC,+JAAA,CAAA,UAAI;gDAAC,MAAK;gDAAmB,WAAU;0DAA4B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASlF;GAjFM;;QACgB,gJAAA,CAAA,uBAAoB;QACvB,qIAAA,CAAA,YAAS;QACL,6JAAA,CAAA,UAAO;QAEf,iKAAA,CAAA,UAAO;;;KALhB;uCAmFS"}},
    {"offset": {"line": 255, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}