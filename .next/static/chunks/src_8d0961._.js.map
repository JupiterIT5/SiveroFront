{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://D%3A/Portfolio/Shop-kwork/shop-kwork/src/entities/favouriteStore/store.ts"],"sourcesContent":["import { create } from \"zustand\";\r\nimport { toast } from \"react-toastify\";\r\n\r\ninterface Favourite {\r\n  id: string;\r\n  name: string;\r\n  price: number;\r\n  img: string;\r\n}\r\n\r\ninterface FavouriteStore {\r\n  favourite: Favourite[];\r\n  addFav: (fav: Favourite) => void;\r\n  removeFav: (id: string) => void;\r\n  clearFav: () => void;\r\n  totalCost: () => number;\r\n}\r\n\r\nexport const useFavStore = create<FavouriteStore>((set, get) => ({\r\n  favourite: [],\r\n  addFav: fav => {\r\n    const isAlreadyAdded = get().favourite.some(item => item.id === fav.id);\r\n\r\n    if (!isAlreadyAdded) {\r\n      set(state => ({\r\n        favourite: [...state.favourite, fav],\r\n      }));\r\n      toast.success(`Добавлено в избранное: ${fav.name}`, {\r\n        position: \"top-right\",\r\n      });\r\n    } else {\r\n      toast.warning(`Объект уже в избранном: ${fav.name}`, {\r\n        position: \"top-right\",\r\n      });\r\n    }\r\n  },\r\n  removeFav: id => {\r\n    const favItem = get().favourite.find(fav => fav.id === id);\r\n    set(state => ({\r\n      favourite: state.favourite.filter(fav => fav.id !== id),\r\n    }));\r\n    if (favItem) {\r\n      toast.error(`Удалено из избранного: ${favItem.name}`, {\r\n        position: \"top-right\",\r\n      });\r\n    }\r\n  },\r\n  clearFav: () => {\r\n    set(() => ({\r\n      favourite: [],\r\n    }));\r\n    toast.info(\"Избранное очищено.\", {\r\n      position: \"top-right\",\r\n    });\r\n  },\r\n  totalCost: () => {\r\n    const products = get().favourite;\r\n    return products.reduce((total, fav) => total + fav.price, 0);\r\n  },\r\n}));\r\n"],"names":[],"mappings":";;;AACA;AADA;;;AAkBO,MAAM,cAAc,CAAA,GAAA,2IAAA,CAAA,SAAM,AAAD,EAAkB,CAAC,KAAK,MAAQ,CAAC;QAC/D,WAAW,EAAE;QACb,QAAQ,CAAA;YACN,MAAM,iBAAiB,MAAM,SAAS,CAAC,IAAI,CAAC,CAAA,OAAQ,KAAK,EAAE,KAAK,IAAI,EAAE;YAEtE,IAAI,CAAC,gBAAgB;gBACnB,IAAI,CAAA,QAAS,CAAC;wBACZ,WAAW;+BAAI,MAAM,SAAS;4BAAE;yBAAI;oBACtC,CAAC;gBACD,sJAAA,CAAA,QAAK,CAAC,OAAO,CAAC,CAAC,uBAAuB,EAAE,IAAI,IAAI,EAAE,EAAE;oBAClD,UAAU;gBACZ;YACF,OAAO;gBACL,sJAAA,CAAA,QAAK,CAAC,OAAO,CAAC,CAAC,wBAAwB,EAAE,IAAI,IAAI,EAAE,EAAE;oBACnD,UAAU;gBACZ;YACF;QACF;QACA,WAAW,CAAA;YACT,MAAM,UAAU,MAAM,SAAS,CAAC,IAAI,CAAC,CAAA,MAAO,IAAI,EAAE,KAAK;YACvD,IAAI,CAAA,QAAS,CAAC;oBACZ,WAAW,MAAM,SAAS,CAAC,MAAM,CAAC,CAAA,MAAO,IAAI,EAAE,KAAK;gBACtD,CAAC;YACD,IAAI,SAAS;gBACX,sJAAA,CAAA,QAAK,CAAC,KAAK,CAAC,CAAC,uBAAuB,EAAE,QAAQ,IAAI,EAAE,EAAE;oBACpD,UAAU;gBACZ;YACF;QACF;QACA,UAAU;YACR,IAAI,IAAM,CAAC;oBACT,WAAW,EAAE;gBACf,CAAC;YACD,sJAAA,CAAA,QAAK,CAAC,IAAI,CAAC,sBAAsB;gBAC/B,UAAU;YACZ;QACF;QACA,WAAW;YACT,MAAM,WAAW,MAAM,SAAS;YAChC,OAAO,SAAS,MAAM,CAAC,CAAC,OAAO,MAAQ,QAAQ,IAAI,KAAK,EAAE;QAC5D;IACF,CAAC"}},
    {"offset": {"line": 61, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 67, "column": 0}, "map": {"version":3,"sources":["file://D%3A/Portfolio/Shop-kwork/shop-kwork/src/entities/CatalogCard/ui/CatalogCard.tsx"],"sourcesContent":["\"use client\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { ICCard } from \"../types\";\r\n\r\nimport \"../styles/catalog-card.scss\";\r\n\r\nimport { useFavStore } from \"@/entities/favouriteStore/store\";\r\nimport Link from \"next/link\";\r\nimport Image from \"next/image\";\r\nimport { useAddToWishlistMutation } from \"@/shared/api/ProfileApi/ProfileApi\";\r\n\r\nconst CatalogCard = ({ id, img, name, href, price }: ICCard) => {\r\n  const { addFav } = useFavStore();\r\n  const [token, setToken] = useState(\"\");\r\n  const [addToWishlist] = useAddToWishlistMutation();\r\n\r\n  useEffect(() => {\r\n    if (typeof window !== \"undefined\") {\r\n      setToken(localStorage.getItem(\"access_token\") || \"\");\r\n    }\r\n  }, []);\r\n\r\n  const handleAddFavourite = () => {\r\n    addToWishlist({ product_id: id });\r\n    if (!token) {\r\n      if (name.trim() && price) {\r\n        addFav({\r\n          id: id.toString(),\r\n          name,\r\n          price: parseFloat(price),\r\n          img,\r\n        });\r\n      }\r\n    } else {\r\n      if (name.trim() && price) {\r\n        addFav({\r\n          id: id.toString(),\r\n          name,\r\n          price: parseFloat(price),\r\n          img,\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"catalog-card flex flex-col items-center relative transition-all duration-300 pb-2 hover:shadow-lg\">\r\n      <div className=\"relative group\">\r\n        <Link href={href} className=\"block w-full\">\r\n          {/* Используем Image компонент для загрузки изображения */}\r\n          <Image\r\n            width={400}\r\n            height={400}\r\n            loading=\"lazy\"\r\n            src={img}\r\n            alt={name}\r\n            className={`w-auto h-[600px] object-cover`}\r\n          />\r\n        </Link>\r\n\r\n        {price && (\r\n          <button\r\n            className=\"absolute bottom-2 right-2 hover:bg-white p-2 rounded-full shadow-md opacity-0 group-hover:opacity-100 transition-opacity duration-300\"\r\n            aria-label=\"Добавить в избранное\"\r\n            onClick={handleAddFavourite}\r\n          >\r\n            ❤\r\n          </button>\r\n        )}\r\n      </div>\r\n      <span className={price ? \"productions__item-name\" : \"categories__item-name\"}>{name}</span>\r\n      {/* Убедитесь, что price всегда строка или пустая строка */}\r\n      <span className=\"productions__item-price\">{price ? `${price} руб.` : \"\"}</span>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CatalogCard;\r\n"],"names":[],"mappings":";;;;AACA;AAKA;AACA;AACA;AACA;;;AATA;;;;;;;AAWA,MAAM,cAAc,CAAC,EAAE,EAAE,EAAE,GAAG,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,EAAU;;IACzD,MAAM,EAAE,MAAM,EAAE,GAAG,CAAA,GAAA,6IAAA,CAAA,cAAW,AAAD;IAC7B,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACnC,MAAM,CAAC,cAAc,GAAG,CAAA,GAAA,oJAAA,CAAA,2BAAwB,AAAD;IAE/C,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;iCAAE;YACR,wCAAmC;gBACjC,SAAS,aAAa,OAAO,CAAC,mBAAmB;YACnD;QACF;gCAAG,EAAE;IAEL,MAAM,qBAAqB;QACzB,cAAc;YAAE,YAAY;QAAG;QAC/B,IAAI,CAAC,OAAO;YACV,IAAI,KAAK,IAAI,MAAM,OAAO;gBACxB,OAAO;oBACL,IAAI,GAAG,QAAQ;oBACf;oBACA,OAAO,WAAW;oBAClB;gBACF;YACF;QACF,OAAO;YACL,IAAI,KAAK,IAAI,MAAM,OAAO;gBACxB,OAAO;oBACL,IAAI,GAAG,QAAQ;oBACf;oBACA,OAAO,WAAW;oBAClB;gBACF;YACF;QACF;IACF;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;;kCACb,6LAAC,+JAAA,CAAA,UAAI;wBAAC,MAAM;wBAAM,WAAU;kCAE1B,cAAA,6LAAC,gIAAA,CAAA,UAAK;4BACJ,OAAO;4BACP,QAAQ;4BACR,SAAQ;4BACR,KAAK;4BACL,KAAK;4BACL,WAAW,CAAC,6BAA6B,CAAC;;;;;;;;;;;oBAI7C,uBACC,6LAAC;wBACC,WAAU;wBACV,cAAW;wBACX,SAAS;kCACV;;;;;;;;;;;;0BAKL,6LAAC;gBAAK,WAAW,QAAQ,2BAA2B;0BAA0B;;;;;;0BAE9E,6LAAC;gBAAK,WAAU;0BAA2B,QAAQ,GAAG,MAAM,KAAK,CAAC,GAAG;;;;;;;;;;;;AAG3E;GAhEM;;QACe,6IAAA,CAAA,cAAW;QAEN,oJAAA,CAAA,2BAAwB;;;KAH5C;uCAkES"}},
    {"offset": {"line": 199, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 205, "column": 0}, "map": {"version":3,"sources":["file://D%3A/Portfolio/Shop-kwork/shop-kwork/src/entities/CatalogCard/index.ts"],"sourcesContent":["import CatalogCard from \"./ui/CatalogCard\";\r\nexport default CatalogCard;\r\n"],"names":[],"mappings":";;;AAAA;;uCACe,uJAAA,CAAA,UAAW"}},
    {"offset": {"line": 214, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 220, "column": 0}, "map": {"version":3,"sources":["file://D%3A/Portfolio/Shop-kwork/shop-kwork/src/shared/ui/ButtonSize/ui/ButtonSize.tsx"],"sourcesContent":["import React from \"react\";\r\n\r\nimport { IBtnSize } from \"../types\";\r\n\r\nconst ButtonSize = ({ name, className, onClick }: IBtnSize) => {\r\n  return (\r\n    <>\r\n      <button\r\n        onClick={onClick}\r\n        className={`${className} btn bg-transparent btn-ghost shadow-none    uppercase text-[12px]`}\r\n      >\r\n        {name}\r\n      </button>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ButtonSize;\r\n"],"names":[],"mappings":";;;;;AAIA,MAAM,aAAa,CAAC,EAAE,IAAI,EAAE,SAAS,EAAE,OAAO,EAAY;IACxD,qBACE;kBACE,cAAA,6LAAC;YACC,SAAS;YACT,WAAW,GAAG,UAAU,kEAAkE,CAAC;sBAE1F;;;;;;;AAIT;KAXM;uCAaS"}},
    {"offset": {"line": 245, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 251, "column": 0}, "map": {"version":3,"sources":["file://D%3A/Portfolio/Shop-kwork/shop-kwork/src/shared/ui/ButtonSize/index.ts"],"sourcesContent":["import ButtonSize from \"./ui/ButtonSize\";\r\nexport default ButtonSize;\r\n"],"names":[],"mappings":";;;AAAA;;uCACe,yJAAA,CAAA,UAAU"}},
    {"offset": {"line": 260, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 266, "column": 0}, "map": {"version":3,"sources":["file://D%3A/Portfolio/Shop-kwork/shop-kwork/src/entities/ButtonSizes/ui/ButtonSizes.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React from \"react\";\r\nimport ButtonSize from \"@/shared/ui/ButtonSize\";\r\nimport { useGetSizesByProductQuery } from \"@/shared/api/SizesApi/ui/SizesApi\";\r\n\r\ninterface ButtonSizesProps {\r\n  selectedSize?: string;\r\n  onSizeSelect?: (size: string) => void;\r\n}\r\n\r\nconst ButtonSizes: React.FC<ButtonSizesProps> = ({ selectedSize = \"ALL\", onSizeSelect }) => {\r\n  const { data: sizes } = useGetSizesByProductQuery();\r\n\r\n  return (\r\n    <div className=\"flex flex-wrap tablet:flex-nowrap gap-3\">\r\n      {sizes?.map((item, idx) => {\r\n        const isActive = selectedSize === item.name;\r\n        return (\r\n          <ButtonSize\r\n            key={idx}\r\n            name={item.name}\r\n            className={`${item.className} ${isActive ? \"border-2 border-[#423c3d]\" : \"\"}`}\r\n            onClick={() => onSizeSelect && onSizeSelect(item.name)}\r\n          />\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ButtonSizes;\r\n"],"names":[],"mappings":";;;;AAGA;AACA;;;AAJA;;;AAWA,MAAM,cAA0C,CAAC,EAAE,eAAe,KAAK,EAAE,YAAY,EAAE;;IACrF,MAAM,EAAE,MAAM,KAAK,EAAE,GAAG,CAAA,GAAA,sJAAA,CAAA,4BAAyB,AAAD;IAEhD,qBACE,6LAAC;QAAI,WAAU;kBACZ,OAAO,IAAI,CAAC,MAAM;YACjB,MAAM,WAAW,iBAAiB,KAAK,IAAI;YAC3C,qBACE,6LAAC,6IAAA,CAAA,UAAU;gBAET,MAAM,KAAK,IAAI;gBACf,WAAW,GAAG,KAAK,SAAS,CAAC,CAAC,EAAE,WAAW,8BAA8B,IAAI;gBAC7E,SAAS,IAAM,gBAAgB,aAAa,KAAK,IAAI;eAHhD;;;;;QAMX;;;;;;AAGN;GAlBM;;QACoB,sJAAA,CAAA,4BAAyB;;;KAD7C;uCAoBS"}},
    {"offset": {"line": 312, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 318, "column": 0}, "map": {"version":3,"sources":["file://D%3A/Portfolio/Shop-kwork/shop-kwork/src/entities/ButtonSizes/index.ts"],"sourcesContent":["import ButtonSizes from \"./ui/ButtonSizes\";\r\nexport default ButtonSizes;\r\n"],"names":[],"mappings":";;;AAAA;;uCACe,uJAAA,CAAA,UAAW"}},
    {"offset": {"line": 327, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 333, "column": 0}, "map": {"version":3,"sources":["file://D%3A/Portfolio/Shop-kwork/shop-kwork/src/shared/ui/Select/ui/Select.tsx"],"sourcesContent":["import React from \"react\";\r\n\r\nimport { ISelect } from \"../types\";\r\n\r\ninterface SelectProps extends ISelect {\r\n  value: string;\r\n  onChange: (value: string) => void;\r\n}\r\n\r\nconst Select: React.FC<SelectProps> = ({ name, options, value, onChange }) => {\r\n  return (\r\n    <div className=\"border-b-[1px] border-x-none border-[#423c3d]\">\r\n      <select\r\n        className=\"select bg-transparent w-full max-w-full tablet:max-w-xs uppercase\"\r\n        value={value}\r\n        onChange={e => onChange(e.target.value)}\r\n      >\r\n        <option value=\"\" disabled>\r\n          {name}\r\n        </option>\r\n        {options.map((item, idx) => (\r\n          <option key={idx} value={item.value}>\r\n            {item.option}\r\n          </option>\r\n        ))}\r\n      </select>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Select;\r\n"],"names":[],"mappings":";;;;;AASA,MAAM,SAAgC,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,KAAK,EAAE,QAAQ,EAAE;IACvE,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YACC,WAAU;YACV,OAAO;YACP,UAAU,CAAA,IAAK,SAAS,EAAE,MAAM,CAAC,KAAK;;8BAEtC,6LAAC;oBAAO,OAAM;oBAAG,QAAQ;8BACtB;;;;;;gBAEF,QAAQ,GAAG,CAAC,CAAC,MAAM,oBAClB,6LAAC;wBAAiB,OAAO,KAAK,KAAK;kCAChC,KAAK,MAAM;uBADD;;;;;;;;;;;;;;;;AAOvB;KAnBM;uCAqBS"}},
    {"offset": {"line": 382, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 388, "column": 0}, "map": {"version":3,"sources":["file://D%3A/Portfolio/Shop-kwork/shop-kwork/src/shared/ui/Select/index.ts"],"sourcesContent":["import Select from \"./ui/Select\";\r\nexport default Select;\r\n"],"names":[],"mappings":";;;AAAA;;uCACe,iJAAA,CAAA,UAAM"}},
    {"offset": {"line": 397, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 403, "column": 0}, "map": {"version":3,"sources":["file://D%3A/Portfolio/Shop-kwork/shop-kwork/src/shared/ui/Breadcrumbs/ui/Breadcrumbs.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport Link from \"next/link\";\r\nimport { usePathname } from \"next/navigation\";\r\n\r\nconst segmentNames: Record<string, string> = {\r\n  \"catalog-categories\": \"Каталог\",\r\n  \"catalog-products\": \"Каталог\",\r\n};\r\n\r\nconst isSlug = (segment: string) => /^[a-zA-Z0-9-_]+$/.test(segment);\r\nconst isProductId = (segment: string) => /^[0-9]+$/.test(segment);\r\n\r\nconst Breadcrumbs = () => {\r\n  const pathname = usePathname();\r\n  const pathSegments = pathname.split(\"/\").filter(segment => segment);\r\n\r\n  return (\r\n    <nav aria-label=\"breadcrumb\">\r\n      <ul className=\"flex space-x-2 text-gray-600\">\r\n        <li>\r\n          <Link href=\"/\" className=\"hover:underline\">\r\n            Главная\r\n          </Link>\r\n        </li>\r\n        {pathSegments.map((segment, index) => {\r\n          const href = \"/\" + pathSegments.slice(0, index + 1).join(\"/\");\r\n          const isLast = index === pathSegments.length - 1;\r\n\r\n          let displayName = segmentNames[segment] || decodeURIComponent(segment);\r\n          if (isSlug(segment) && !segmentNames[segment]) displayName = segment;\r\n          if (isProductId(segment)) displayName = \"Product\";\r\n\r\n          return (\r\n            <li key={href} className=\"flex items-center\">\r\n              <span className=\"mx-2\">/</span>\r\n              {isLast ? (\r\n                <span className=\"text-gray-800\">{displayName}</span>\r\n              ) : (\r\n                <Link href={href === \"/catalog-products\" ? \"/catalog-categories\" : href} className=\"hover:underline\">\r\n                  {displayName}\r\n                </Link>\r\n              )}\r\n            </li>\r\n          );\r\n        })}\r\n      </ul>\r\n    </nav>\r\n  );\r\n};\r\n\r\nexport default Breadcrumbs;\r\n"],"names":[],"mappings":";;;;AAEA;AACA;;;AAHA;;;AAKA,MAAM,eAAuC;IAC3C,sBAAsB;IACtB,oBAAoB;AACtB;AAEA,MAAM,SAAS,CAAC,UAAoB,mBAAmB,IAAI,CAAC;AAC5D,MAAM,cAAc,CAAC,UAAoB,WAAW,IAAI,CAAC;AAEzD,MAAM,cAAc;;IAClB,MAAM,WAAW,CAAA,GAAA,qIAAA,CAAA,cAAW,AAAD;IAC3B,MAAM,eAAe,SAAS,KAAK,CAAC,KAAK,MAAM,CAAC,CAAA,UAAW;IAE3D,qBACE,6LAAC;QAAI,cAAW;kBACd,cAAA,6LAAC;YAAG,WAAU;;8BACZ,6LAAC;8BACC,cAAA,6LAAC,+JAAA,CAAA,UAAI;wBAAC,MAAK;wBAAI,WAAU;kCAAkB;;;;;;;;;;;gBAI5C,aAAa,GAAG,CAAC,CAAC,SAAS;oBAC1B,MAAM,OAAO,MAAM,aAAa,KAAK,CAAC,GAAG,QAAQ,GAAG,IAAI,CAAC;oBACzD,MAAM,SAAS,UAAU,aAAa,MAAM,GAAG;oBAE/C,IAAI,cAAc,YAAY,CAAC,QAAQ,IAAI,mBAAmB;oBAC9D,IAAI,OAAO,YAAY,CAAC,YAAY,CAAC,QAAQ,EAAE,cAAc;oBAC7D,IAAI,YAAY,UAAU,cAAc;oBAExC,qBACE,6LAAC;wBAAc,WAAU;;0CACvB,6LAAC;gCAAK,WAAU;0CAAO;;;;;;4BACtB,uBACC,6LAAC;gCAAK,WAAU;0CAAiB;;;;;qDAEjC,6LAAC,+JAAA,CAAA,UAAI;gCAAC,MAAM,SAAS,sBAAsB,wBAAwB;gCAAM,WAAU;0CAChF;;;;;;;uBANE;;;;;gBAWb;;;;;;;;;;;;AAIR;GApCM;;QACa,qIAAA,CAAA,cAAW;;;KADxB;uCAsCS"}},
    {"offset": {"line": 508, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 514, "column": 0}, "map": {"version":3,"sources":["file://D%3A/Portfolio/Shop-kwork/shop-kwork/src/shared/ui/Breadcrumbs/index.ts"],"sourcesContent":["import Breadcrumbs from \"./ui/Breadcrumbs\";\r\nexport default Breadcrumbs;\r\n"],"names":[],"mappings":";;;AAAA;;uCACe,2JAAA,CAAA,UAAW"}},
    {"offset": {"line": 523, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 529, "column": 0}, "map": {"version":3,"sources":["file://D%3A/Portfolio/Shop-kwork/shop-kwork/src/widgets/CatalogProductsPage/ui/CatalogProductsPage.tsx"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\r\n\"use client\";\r\n\r\nimport React, { useState } from \"react\";\r\nimport { useParams, useSearchParams, useRouter } from \"next/navigation\";\r\n\r\nimport CatalogCard from \"@/entities/CatalogCard\";\r\nimport ButtonSizes from \"@/entities/ButtonSizes\";\r\nimport Select from \"@/shared/ui/Select\";\r\nimport Breadcrumbs from \"@/shared/ui/Breadcrumbs\";\r\n\r\nimport { useGetProductsByCategoryQuery } from \"@/shared/api/ProductsApi/ui/ProductsApi\";\r\nimport { useGetCategoriesQuery } from \"@/shared/api/CategoriesApi/CategoriesApi\";\r\nimport { useGetColorsByProductQuery } from \"@/shared/api/ColorsApi/ui/ColorsApi\";\r\n\r\nimport \"../styles/catalog-products-page.scss\";\r\n\r\nconst CatalogProductsPage = () => {\r\n  const { products_slug } = useParams();\r\n  const searchParams = useSearchParams();\r\n  const router = useRouter();\r\n\r\n  // Получаем категории и текущую категорию\r\n  const { data: categories } = useGetCategoriesQuery();\r\n  const category = categories?.find(item => item.slug === products_slug);\r\n\r\n  // Фильтры из URL (если уже были установлены)\r\n  const initialSort = searchParams.get(\"sort\") || \"newest\";\r\n  const initialColor = searchParams.get(\"color\") || \"all\";\r\n  const initialSize = searchParams.get(\"size\") || \"ALL\";\r\n\r\n  // Состояния фильтров\r\n  const [sort, setSort] = useState(initialSort);\r\n  const [color, setColor] = useState(initialColor);\r\n  const [size, setSize] = useState(initialSize);\r\n\r\n  // Загружаем цвета\r\n  const { data: colors } = useGetColorsByProductQuery();\r\n  const colorOptions = colors\r\n    ? colors.map(color => ({\r\n        option: color.name,\r\n        value: color.name.toLowerCase(),\r\n      }))\r\n    : [];\r\n  const optionsColor = [{ option: \"Все цвета\", value: \"all\" }, ...colorOptions];\r\n\r\n  // Формируем query params\r\n  const queryParams = new URLSearchParams();\r\n  if (category?.slug) queryParams.set(\"category_slug\", category.slug);\r\n  if (color !== \"all\") queryParams.set(\"color\", color);\r\n  if (size !== \"all\") queryParams.set(\"size\", size);\r\n  if (sort) queryParams.set(\"sort\", sort);\r\n\r\n  const queryString = queryParams.toString();\r\n  const { data: products, isLoading, error } = useGetProductsByCategoryQuery(queryString as any);\r\n\r\n  // Тип для ключей фильтра\r\n  type FilterKey = \"color\" | \"size\" | \"sort\";\r\n\r\n  // Функция обновления фильтров\r\n  const updateFilters = (key: FilterKey, value: string) => {\r\n    const newParams = new URLSearchParams(searchParams.toString());\r\n\r\n    if (value === \"all\") {\r\n      newParams.delete(key);\r\n    } else {\r\n      newParams.set(key, value);\r\n    }\r\n\r\n    router.push(`?${newParams.toString()}`);\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col gap-4 mt-[10px] justify-center mb-[70px]\">\r\n      <div className=\"breadcrumbs text-sm mx-auto mb-[70px]\">\r\n        <Breadcrumbs />\r\n      </div>\r\n\r\n      <div className=\"mb-[40px]\">\r\n        <h1 className=\"title-h1\">{category?.title || \"Категория не найдена\"}</h1>\r\n      </div>\r\n\r\n      {/* Фильтры */}\r\n      <div className=\"flex flex-col gap-8 mindesk:gap-0 mindesk:flex-row mindesk:justify-between items-center mb-[30px]\">\r\n        <div className=\"flex flex-col tablet:flex-row gap-[20px]\">\r\n          <Select\r\n            name=\"По Популярности\"\r\n            options={[\r\n              { option: \"Сначала старые\", value: \"oldest\" },\r\n              { option: \"Сначала новые\", value: \"newest\" },\r\n              { option: \"Цена по возрастанию\", value: \"price_asc\" },\r\n              { option: \"Цена по убыванию\", value: \"price_desc\" },\r\n            ]}\r\n            value={sort}\r\n            onChange={value => {\r\n              setSort(value);\r\n              updateFilters(\"sort\", value);\r\n            }}\r\n          />\r\n          <Select\r\n            name=\"Цвет\"\r\n            options={optionsColor}\r\n            value={color}\r\n            onChange={value => {\r\n              setColor(value);\r\n              updateFilters(\"color\", value);\r\n            }}\r\n          />\r\n        </div>\r\n        <div className=\"flex items-center gap-2\">\r\n          <ButtonSizes\r\n            selectedSize={size}\r\n            onSizeSelect={value => {\r\n              setSize(value);\r\n              updateFilters(\"size\", value);\r\n            }}\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Карточки товаров */}\r\n      <div className=\"products-card-container\">\r\n        {isLoading && <p>Загрузка...</p>}\r\n        {error && <p>Ошибка загрузки товаров</p>}\r\n        {products?.data.map(item => {\r\n          // Парсим строку JSON в массив URL\r\n          // const imageUrls = JSON.parse(item.image_urls); // Теперь это массив\r\n          return (\r\n            <CatalogCard\r\n              id={item.id}\r\n              key={item.id}\r\n              img={item.images[0].image_path} // Используем первый URL из массива\r\n              href={`/product/${item.id}`}\r\n              name={item.name}\r\n              price={Number(item.price).toFixed()}\r\n            />\r\n          );\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CatalogProductsPage;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 773, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}